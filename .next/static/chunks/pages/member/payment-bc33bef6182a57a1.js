(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[324],{6230:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},48506:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/member/payment",function(){return n(85048)}])},85760:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var a=n(47568),s=n(29815),c=n(34051),r=n.n(c),i=n(85893),o=n(9669),l=n.n(o),u=n(47041),d=n(25675),h=n.n(d),p=n(67294),m=n(4687),f=n(15725),g=n.n(f),x=n(57496),j=n.n(x),v=n(57046).io,k=g().socketPath,_=g().apiPath;function b(){var e=(0,p.useRef)(0),t=(0,p.useState)(!1),n=t[0],c=t[1],o=(0,p.useState)([]),d=o[0],f=o[1],g=(0,p.useState)(""),x=g[0],b=g[1],w=(0,m.b)(),y=v(k),N=(0,u.getCookie)("access_token"),C=w.isLogin.get_login,S=w.isStore.get_isStore,P=(0,p.useState)(!0),T=P[0],B=P[1],U=(0,u.getCookie)("name");function F(){return Z.apply(this,arguments)}function Z(){return(Z=(0,a.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l()({method:"get",url:"".concat(_,"/api/member/getOldChat"),headers:{Authorization:"Bearer ".concat(N)}}).then((function(t){B(t.data.statusRead),f(t.data.oldMessage),n&&setTimeout((function(){null!=e.current&&e.current.scrollTo({behavior:"smooth",top:e.current.scrollHeight})}),500)}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))).apply(this,arguments)}function A(){return(A=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l()({method:"get",url:"".concat(_,"/api/member/readChat"),headers:{Authorization:"Bearer ".concat(N)}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function H(){return R.apply(this,arguments)}function R(){return(R=(0,a.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f((function(e){return(0,s.Z)(e).concat([{role:"member",message:x}])})),b(""),setTimeout((function(){e.current.scrollTo({behavior:"smooth",top:e.current.scrollHeight})}),200),t.prev=3,t.next=6,l()({method:"POST",url:"".concat(_,"/api/member/chatToAdmin"),headers:{Authorization:"Bearer ".concat(N)},data:{message:x}}).then((function(e){}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[3,8]])})))).apply(this,arguments)}(0,p.useEffect)((function(){n&&(!function(){A.apply(this,arguments)}(),F())}),[n]),y.on("connect",(function(){})),y.on("user-".concat(U),(function(e,t){!function(e){f((function(t){return(0,s.Z)(t).concat([{username:e.username,role:e.role,message:e.message}])})),F(),b("")}(e)}));return(0,i.jsx)(p.Fragment,{children:C&&!S&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"contact-us",children:(0,i.jsxs)("div",{className:"column-contact-us",children:[!n&&(0,i.jsx)("div",{className:"text-contact-us",children:(0,i.jsx)("p",{children:"\u0e15\u0e34\u0e14\u0e15\u0e48\u0e2d\u0e40\u0e23\u0e32"})}),(0,i.jsxs)("div",{className:"img-contact-us",onClick:function(){return c(!n)},children:[!T&&(0,i.jsx)("div",{className:j().statusChat,children:(0,i.jsx)("div",{className:j().newMessage,children:"  "})}),(0,i.jsx)(h(),{className:j().logoContact,width:57,height:57,src:"/assets/images/contact.jpg",alt:"image-contactUs"})]})]})}),n&&(0,i.jsxs)("div",{className:j().chatContent,children:[(0,i.jsx)("div",{className:j().chatHeader,children:(0,i.jsx)("p",{children:"Fillfin"})}),(0,i.jsx)("div",{className:j().chatBody,ref:e,children:null===d||void 0===d?void 0:d.map((function(e,t){return(0,i.jsx)("div",{children:"member"==e.role?(0,i.jsxs)("div",{className:j().memberChat,children:[(0,i.jsx)("img",{className:j().iconMember,src:"/assets/images/product.png",alt:"image-contactUs"}),(0,i.jsx)("p",{children:e.message})]}):(0,i.jsxs)("div",{className:j().adminChat,children:[(0,i.jsx)("img",{className:j().iconAdmin,src:"/assets/images/contact.jpg",alt:"image-contactUs"}),(0,i.jsx)("p",{children:e.message})]})},t)}))}),(0,i.jsxs)("div",{className:j().chatFooter,children:[(0,i.jsx)("span",{className:j().iconPlus,children:(0,i.jsx)("i",{className:"fa-solid fa-circle-plus"})}),(0,i.jsx)("input",{value:x,type:"text",onChange:function(e){return b(e.target.value)},onKeyDown:function(e){13===e.keyCode&&H()}}),(0,i.jsx)("span",{className:j().iconSend,children:(0,i.jsx)("i",{className:"fa-solid fa-paper-plane",onClick:function(e){return H()}})})]})]})]})})}},85048:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return N},default:function(){return C}});var a=n(85893),s=n(9008),c=n.n(s),r=n(67294),i=n(47568),o=n(34051),l=n.n(o),u=n(15725),d=n.n(u),h=n(6230),p=n.n(h),m=n(86455),f=n.n(m),g=n(85760),x=n(47041),j=n(11163),v=n(9669),k=n.n(v),_=n(65965),b=n.n(_),w=d().apiPath;function y(){var e=function(){var e=(0,x.getCookie)("renewPackage"),t=(0,x.getCookie)("package");void 0!=e&&null==t?function(){K.apply(this,arguments)}():function(){q.apply(this,arguments)}()},t=(0,j.useRouter)(),n=(0,r.useRef)(null),s=(0,r.useState)(null),c=s[0],o=s[1],u=(0,r.useState)([]),d=u[0],h=u[1],m=(0,r.useState)([]),v=m[0],_=m[1],y=(0,r.useState)(!1),N=y[0],C=y[1],S=(0,r.useState)(!1),P=S[0],T=S[1],B=(0,r.useState)([]),U=B[0],F=B[1],Z=(0,r.useState)({}),A=Z[0],H=Z[1],R=(0,r.useState)(),E=R[0],z=R[1],O=(0,r.useState)(!1),M=O[0],I=O[1];function G(){return G=(0,i.Z)(l().mark((function e(){var t,n,a,s,c,r,i,o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,x.getCookie)("member_code"),n=(0,x.getCookie)("renewPackage"),a=(0,x.getCookie)("package"),s={},void 0!=n&&null==a?s=n:(s=a,D()),e.prev=5,e.next=8,k()({method:"POST",url:"".concat(w,"/api/package/getSelect"),headers:{"Content-Type":"application/json"},data:{memberCode:t,packageId:s}});case 8:c=e.sent,r=c.data,F(r.package),P?H(r.package):(i=r.package.password.slice(2,6),o=r.package.password.replace(i,"****"),u={username:r.package.username,password:o},H(u)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),console.log(e.t0),f().fire({title:e.t0.response.statusText,icon:"error",position:"center"});case 18:case"end":return e.stop()}}),e,null,[[5,14]])}))),G.apply(this,arguments)}function D(){return L.apply(this,arguments)}function L(){return(L=(0,i.Z)(l().mark((function e(){var n,a,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,x.getCookie)("member_code"),a=(0,x.getCookie)("access_token"),e.next=4,k()({method:"GET",url:"".concat(w,"/api/package/statusPayment/").concat(n),headers:{Authorization:"Bearer ".concat(a)}});case 4:s=e.sent,"confirm"==(c=s.data).statusPay?f().fire({title:"\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34\u0e41\u0e25\u0e49\u0e27 \u0e01\u0e23\u0e38\u0e13\u0e32\u0e25\u0e47\u0e2d\u0e01\u0e2d\u0e34\u0e19\u0e43\u0e2b\u0e21\u0e48\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07",icon:"success",position:"center",showConfirmButton:!1,timer:1700}).then((function(){t.push("/login")})):z(c.statusPay);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return X=(0,i.Z)(l().mark((function e(){var t,n,a,s,c,r,i,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k()({method:"GET",url:"".concat(w,"/api/bank/get")});case 2:for(t=e.sent,n=t.data,a=!0,s=!1,c=void 0,e.prev=5,r=n.data[Symbol.iterator]();!(a=(i=r.next()).done);a=!0)"active"==(o=i.value).status&&(_(o),h(n.data));e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),s=!0,c=e.t0;case 13:e.prev=13,e.prev=14,a||null==r.return||r.return();case 16:if(e.prev=16,!s){e.next=19;break}throw c;case 19:return e.finish(16);case 20:return e.finish(13);case 21:setTimeout((function(){return C(!0)}),2e3);case 22:case"end":return e.stop()}}),e,null,[[5,9,13,21],[14,,16,20]])}))),X.apply(this,arguments)}function q(){return(q=(0,i.Z)(l().mark((function e(){var t,a,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,x.getCookie)("member_code"),a=(0,x.getCookie)("package"),e.prev=2,(s=new(p())).append("slip",n.current.files[0]),s.append("memberCode",t),s.append("bankRef",v.id),s.append("packageId",a),e.next=10,k()({method:"POST",url:"".concat(w,"/api/package/createPayment"),data:s});case 10:c=e.sent,c.data.status?f().fire({position:"center",icon:"success",title:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08 \u0e23\u0e2d\u0e01\u0e32\u0e23\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34"}).then((function(){z("pending")})):f().fire({position:"center",icon:"error",title:res.description,showConfirmButton:!1,timer:1e3}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}function K(){return(K=(0,i.Z)(l().mark((function e(){var a,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,x.getCookie)("access_token"),e.prev=1,(s=new(p())).append("slip",n.current.files[0]),s.append("bankRef",v.id),e.next=7,k()({method:"POST",url:"".concat(w,"/api/package/renewal"),headers:{Authorization:"Bearer ".concat(a)},data:s});case 7:c=e.sent,c.data.status&&f().fire({position:"center",icon:"success",title:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08 \u0e23\u0e2d\u0e01\u0e32\u0e23\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34"}).then((function(){t.push("/login"),z("pending")})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}return(0,r.useEffect)((function(){(function(){G.apply(this,arguments)})(),function(){X.apply(this,arguments)}()}),[P]),(0,a.jsx)(r.Fragment,{children:(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"detail-pay",children:[(0,a.jsxs)("div",{className:"column-detail-pay ".concat(b().minHeight),children:[(0,a.jsx)("div",{className:"text-top",children:(0,a.jsx)("h2",{children:"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e01\u0e32\u0e23\u0e0a\u0e33\u0e23\u0e30\u0e04\u0e48\u0e32\u0e2a\u0e21\u0e32\u0e0a\u0e34\u0e01"})}),(0,a.jsx)("div",{className:"column-table",children:(0,a.jsx)("table",{children:(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e41\u0e1e\u0e47\u0e01\u0e40\u0e01\u0e08"}),(0,a.jsx)("th",{})]}),(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{children:["\u0e41\u0e1e\u0e47\u0e01\u0e40\u0e01\u0e08 ",U.packageName]}),(0,a.jsxs)("td",{className:"td-right",style:{textAlign:"center"},children:[U.price," BTH"]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{children:["\u0e23\u0e30\u0e22\u0e30\u0e40\u0e27\u0e25\u0e32\u0e2a\u0e21\u0e32\u0e0a\u0e34\u0e01\u0e41\u0e1e\u0e47\u0e01\u0e40\u0e01\u0e08 ",U.packageName,"(",U.day," \u0e27\u0e31\u0e19)"]}),(0,a.jsx)("td",{})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:"\u0e23\u0e27\u0e21\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14"}),(0,a.jsxs)("td",{style:{textAlign:"center"},children:[U.price," BTH"]})]})]})})}),(0,a.jsxs)("div",{className:"column-detail-member",children:[(0,a.jsx)("h2",{style:{marginBottom:"2rem"},children:"\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e1c\u0e39\u0e49\u0e2a\u0e21\u0e31\u0e04\u0e23\u0e2a\u0e21\u0e32\u0e0a\u0e34\u0e01"}),(0,a.jsxs)("div",{className:"text-column justify-center",children:[(0,a.jsxs)("div",{className:"column-left",children:[(0,a.jsxs)("p",{children:["\u0e0a\u0e37\u0e48\u0e2d\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49",(0,a.jsx)("span",{children:"(User)"})]}),(0,a.jsx)("p",{children:A.username})]}),(0,a.jsxs)("div",{className:"column-right",children:[(0,a.jsxs)("p",{children:["\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19",(0,a.jsx)("span",{children:"(Password)"})]}),(0,a.jsxs)("p",{children:[A.password,(0,a.jsx)("button",{children:(0,a.jsx)("i",{onClick:function(){return T(!P)},className:"fa-solid fa-eye"})})]})]})]})]}),(0,a.jsx)("div",{className:"column-pay-subscription",children:"pending"==E?(0,a.jsx)("h2",{style:{textAlign:"center"},children:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e23\u0e2d\u0e41\u0e2d\u0e14\u0e21\u0e34\u0e19\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e01\u0e32\u0e23\u0e0a\u0e33\u0e23\u0e30\u0e40\u0e07\u0e34\u0e19"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{children:"\u0e0a\u0e33\u0e23\u0e30\u0e04\u0e48\u0e32\u0e2a\u0e21\u0e31\u0e04\u0e23\u0e2a\u0e21\u0e32\u0e0a\u0e34\u0e01"}),(0,a.jsxs)("div",{className:"column-pay",children:[(0,a.jsxs)("div",{className:"pay-dropdown",children:[(0,a.jsxs)("div",{className:"dropdown-toggle",onClick:function(){return I((function(e){return!e}))},children:[(0,a.jsxs)("div",{className:"dropdown-toggle-left",style:{display:"flex"},children:["active"==v.status&&(0,a.jsx)("img",{src:"".concat(w).concat(v.image),width:35,height:25,alt:"image-bank",style:{alignItems:"center",marginRight:"1rem"}}),"active"==v.status?(0,a.jsxs)("span",{children:[v.bank_name," / ",v.bank_number," / ",v.name]}):"\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e1a\u0e31\u0e0d\u0e0a\u0e35\u0e18\u0e19\u0e32\u0e04\u0e32\u0e23"]}),(0,a.jsx)("div",{className:"dropdown-toggle-right",children:(0,a.jsx)("i",{className:"fa-solid fa-angle-down"})})]}),(0,a.jsx)("div",{className:"pay-dropdown-menu ".concat(M&&"active"),id:"pay-dropdown-menu",children:d?(0,a.jsx)(a.Fragment,{children:null===d||void 0===d?void 0:d.map((function(e,t){return(0,a.jsx)("div",{children:"active"==e.status&&(0,a.jsxs)("div",{className:"dropdown-item",onClick:function(){I((function(e){return!e})),_(e)},children:[(0,a.jsx)("img",{src:"".concat(w).concat(e.image),alt:"image-banklist"}),e.bank_name," / ",e.bank_number," / ",e.name]})},t)}))}):(0,a.jsx)("p",{children:"\u0e44\u0e21\u0e48\u0e21\u0e35\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25"})})]}),(0,a.jsxs)("div",{className:"column-img-pay",children:[(0,a.jsxs)("div",{className:"column-left",style:{height:"300px",width:"250px"},children:[c?(0,a.jsx)("img",{src:c,alt:"image-slip",style:{width:"100%",height:"100%",objectFit:"content"},onClick:function(e){return function(e){var t=e.target.getAttribute("src");f().fire({imageUrl:t,imageWidth:400,imageHeight:450,background:"rgba(0,0,0,0)",color:"#fff",imageAlt:"Custom image",showConfirmButton:!1})}(e)}}):(0,a.jsx)("i",{className:"fa-solid fa-image"}),(0,a.jsx)("input",{style:{display:"none"},type:"file",accept:".jpeg,.jpg,.png",ref:n,onChange:function(e){return function(e){if(!e.target.files.length)return!1;if(["image/jpeg","iamge/jpg","image/png","image/webp"].includes(e.target.files[0].type)){var t=URL.createObjectURL(e.target.files[0]);o(t)}else f().fire({title:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e2d\u0e31\u0e1b\u0e42\u0e2b\u0e25\u0e14\u0e40\u0e09\u0e1e\u0e32\u0e30\u0e44\u0e1f\u0e25\u0e4c\u0e23\u0e39\u0e1b\u0e20\u0e32\u0e1e",icon:"warning",position:"center"})}(e)}})]}),(0,a.jsxs)("div",{className:"column-right",children:[(0,a.jsx)("h3",{children:"\u0e2d\u0e31\u0e1b\u0e42\u0e2b\u0e25\u0e14\u0e2a\u0e25\u0e34\u0e1b"}),(0,a.jsx)("p",{children:"\u0e02\u0e19\u0e32\u0e14\u0e2d\u0e31\u0e1b\u0e42\u0e2b\u0e25\u0e14\u0e44\u0e1f\u0e25\u0e4c\u0e20\u0e32\u0e1e \u0e44\u0e21\u0e48\u0e40\u0e01\u0e34\u0e19 5 Mb"}),(0,a.jsx)("button",{onClick:function(){return n.current.click()},children:"\u0e2d\u0e31\u0e1b\u0e42\u0e2b\u0e25\u0e14"})]})]})]})]})}),(0,a.jsx)("div",{className:"btn-bottom",children:"pending"==E?null:(0,a.jsx)(r.Fragment,{children:N?(0,a.jsx)("button",{onClick:function(){return""==v?(f().fire({icon:"warning",title:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e1a\u0e31\u0e0d\u0e0a\u0e35"}),!1):c?void f().fire({position:"center",icon:"question",title:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e01\u0e32\u0e23\u0e0a\u0e33\u0e23\u0e30\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48",showCancelButton:!0,showConfirmButton:!0,confirmButtonColor:"#C93A87",confirmButtonText:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19",cancelButtonText:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01"}).then((function(t){t.isConfirmed&&e()})):(f().fire({icon:"warning",title:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e2d\u0e31\u0e1b\u0e42\u0e2b\u0e25\u0e14\u0e2a\u0e25\u0e34\u0e1b"}),!1)},className:"btn-out",children:"\u0e2a\u0e48\u0e07"}):(0,a.jsx)("p",{children:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25"})})})]}),(0,a.jsx)(g.Z,{})]})})})}n(95914),n(9878);var N=!0;function C(){return(0,a.jsxs)(r.Fragment,{children:[(0,a.jsxs)(c(),{children:[" ",(0,a.jsx)("title",{children:"Payment"})," "]}),(0,a.jsx)(y,{})]})}},57496:function(e){e.exports={statusChat:"contactUs_statusChat__4yzMc",newMessage:"contactUs_newMessage__5bOTd",chatContent:"contactUs_chatContent__zrKce",mymove:"contactUs_mymove__ohnuv",chatHeader:"contactUs_chatHeader__NHzwo",chatBody:"contactUs_chatBody__b6Imq",memberChat:"contactUs_memberChat__I3Y9E",adminChat:"contactUs_adminChat__1vv95",chatFooter:"contactUs_chatFooter__ZRmZX",iconPlus:"contactUs_iconPlus__zgrYW",iconSend:"contactUs_iconSend__GH_t8"}},65965:function(e){e.exports={minHeight:"payment_minHeight__G2bR9"}}},function(e){e.O(0,[675,354,774,888,179],(function(){return t=48506,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
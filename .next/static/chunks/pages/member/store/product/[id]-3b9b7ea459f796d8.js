(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[560],{97096:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/member/store/product/[id]",function(){return n(25523)}])},85760:function(t,e,n){"use strict";n.d(e,{Z:function(){return b}});var c=n(47568),s=n(29815),a=n(34051),r=n.n(a),o=n(85893),i=n(9669),u=n.n(i),l=n(47041),m=n(25675),d=n.n(m),h=n(67294),p=n(4687),g=n(15725),x=n.n(g),f=n(57496),_=n.n(f),v=n(57046).io,j=x().socketPath,N=x().apiPath;function b(){var t=(0,h.useRef)(0),e=(0,h.useState)(!1),n=e[0],a=e[1],i=(0,h.useState)([]),m=i[0],g=i[1],x=(0,h.useState)(""),f=x[0],b=x[1],C=(0,p.b)(),w=v(j),k=(0,l.getCookie)("access_token"),y=C.isLogin.get_login,P=C.isStore.get_isStore,U=(0,h.useState)(!0),S=U[0],H=U[1],T=(0,l.getCookie)("name");function A(){return E.apply(this,arguments)}function E(){return(E=(0,c.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u()({method:"get",url:"".concat(N,"/api/member/getOldChat"),headers:{Authorization:"Bearer ".concat(k)}}).then((function(e){H(e.data.statusRead),g(e.data.oldMessage),n&&setTimeout((function(){null!=t.current&&t.current.scrollTo({behavior:"smooth",top:t.current.scrollHeight})}),500)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function Z(){return(Z=(0,c.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u()({method:"get",url:"".concat(N,"/api/member/readChat"),headers:{Authorization:"Bearer ".concat(k)}});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))).apply(this,arguments)}function F(){return z.apply(this,arguments)}function z(){return(z=(0,c.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g((function(t){return(0,s.Z)(t).concat([{role:"member",message:f}])})),b(""),setTimeout((function(){t.current.scrollTo({behavior:"smooth",top:t.current.scrollHeight})}),200),e.prev=3,e.next=6,u()({method:"POST",url:"".concat(N,"/api/member/chatToAdmin"),headers:{Authorization:"Bearer ".concat(k)},data:{message:f}}).then((function(t){}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}(0,h.useEffect)((function(){n&&(!function(){Z.apply(this,arguments)}(),A())}),[n]),w.on("connect",(function(){})),w.on("user-".concat(T),(function(t,e){!function(t){g((function(e){return(0,s.Z)(e).concat([{username:t.username,role:t.role,message:t.message}])})),A(),b("")}(t)}));return(0,o.jsx)(h.Fragment,{children:y&&!P&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"contact-us",children:(0,o.jsxs)("div",{className:"column-contact-us",children:[!n&&(0,o.jsx)("div",{className:"text-contact-us",children:(0,o.jsx)("p",{children:"\u0e15\u0e34\u0e14\u0e15\u0e48\u0e2d\u0e40\u0e23\u0e32"})}),(0,o.jsxs)("div",{className:"img-contact-us",onClick:function(){return a(!n)},children:[!S&&(0,o.jsx)("div",{className:_().statusChat,children:(0,o.jsx)("div",{className:_().newMessage,children:"  "})}),(0,o.jsx)(d(),{className:_().logoContact,width:57,height:57,src:"/assets/images/contact.jpg",alt:"image-contactUs"})]})]})}),n&&(0,o.jsxs)("div",{className:_().chatContent,children:[(0,o.jsx)("div",{className:_().chatHeader,children:(0,o.jsx)("p",{children:"Fillfin"})}),(0,o.jsx)("div",{className:_().chatBody,ref:t,children:null===m||void 0===m?void 0:m.map((function(t,e){return(0,o.jsx)("div",{children:"member"==t.role?(0,o.jsxs)("div",{className:_().memberChat,children:[(0,o.jsx)("img",{className:_().iconMember,src:"/assets/images/product.png",alt:"image-contactUs"}),(0,o.jsx)("p",{children:t.message})]}):(0,o.jsxs)("div",{className:_().adminChat,children:[(0,o.jsx)("img",{className:_().iconAdmin,src:"/assets/images/contact.jpg",alt:"image-contactUs"}),(0,o.jsx)("p",{children:t.message})]})},e)}))}),(0,o.jsxs)("div",{className:_().chatFooter,children:[(0,o.jsx)("span",{className:_().iconPlus,children:(0,o.jsx)("i",{className:"fa-solid fa-circle-plus"})}),(0,o.jsx)("input",{value:f,type:"text",onChange:function(t){return b(t.target.value)},onKeyDown:function(t){13===t.keyCode&&F()}}),(0,o.jsx)("span",{className:_().iconSend,children:(0,o.jsx)("i",{className:"fa-solid fa-paper-plane",onClick:function(t){return F()}})})]})]})]})})}},25523:function(t,e,n){"use strict";n.r(e),n.d(e,{__N_SSP:function(){return f},default:function(){return _}});var c=n(85893),s=n(9008),a=n.n(s),r=n(67294),o=n(11163),i=n.n(o),u=n(15725),l=n.n(u),m=n(85760),d=n(45124),h=n.n(d);function p(t){var e=t.product;return(0,c.jsx)(r.Fragment,{children:(0,c.jsxs)("div",{className:"detail-product ".concat(h().contentHeight),children:[(0,c.jsxs)("div",{className:"detail-product-column",children:[(0,c.jsxs)("div",{className:"detail-left",children:[(0,c.jsx)("div",{className:"column-images ".concat(h().chooseImage),children:(0,c.jsx)(x,{image:e.product_img})}),(0,c.jsx)("h1",{children:e.name_product}),(0,c.jsx)("p",{children:e.content_product}),(0,c.jsx)("hr",{}),(0,c.jsxs)("div",{className:"column-text-bottom",children:[(0,c.jsx)("p",{children:"\u0e23\u0e32\u0e04\u0e32"}),(0,c.jsxs)("p",{className:h().textPrice,children:[e.price," BTH"]})]})]}),(0,c.jsxs)("div",{className:"detail-right",children:[(0,c.jsx)(g,{image:e.product_img}),(0,c.jsx)("button",{style:{position:"absolute",top:0,right:24},onClick:function(){return i().back()},children:(0,c.jsx)("i",{className:"fa-solid fa-xmark"})})]})]}),(0,c.jsx)(m.Z,{})]})})}function g(t){var e=t.image;if(!e)return(0,c.jsx)("img",{src:"/assets/images/product.png"});var n=l().apiPath,s=e.split(",");return(0,c.jsx)("img",{src:"".concat(n).concat(s[0]),alt:"image-preview",style:{cursor:"pointer"},className:"image-main",onError:function(t){return t.target.setAttribute("src","/assets/images/product.png"),!1}})}function x(t){var e=t.image;if(!e)return(0,c.jsx)("img",{src:"/assets/images/product.png",alt:"image-product"});var n=l().apiPath;return e.split(",").map((function(t,e){return(0,c.jsx)("img",{alt:"image-product",src:"".concat(n,"/").concat(t),onClick:function(t){t.target.closest(".detail-product").querySelector(".image-main").setAttribute("src",t.target.getAttribute("src"))},onError:function(t){return t.target.setAttribute("src","/assets/images/product.png"),!1}},e)}))}var f=!0;function _(t){var e=t.product;return(0,c.jsxs)(r.Fragment,{children:[(0,c.jsx)(a(),{children:(0,c.jsx)("title",{children:"Product"})}),(0,c.jsx)(p,{product:e})]})}},57496:function(t){t.exports={statusChat:"contactUs_statusChat__4yzMc",newMessage:"contactUs_newMessage__5bOTd",chatContent:"contactUs_chatContent__zrKce",mymove:"contactUs_mymove__ohnuv",chatHeader:"contactUs_chatHeader__NHzwo",chatBody:"contactUs_chatBody__b6Imq",memberChat:"contactUs_memberChat__I3Y9E",adminChat:"contactUs_adminChat__1vv95",chatFooter:"contactUs_chatFooter__ZRmZX",iconPlus:"contactUs_iconPlus__zgrYW",iconSend:"contactUs_iconSend__GH_t8"}},45124:function(t){t.exports={contentHeight:"preview_contentHeight__Nsmh6",chooseImage:"preview_chooseImage__IJMVo",textPrice:"preview_textPrice__cdpfP"}}},function(t){t.O(0,[675,354,774,888,179],(function(){return e=97096,t(t.s=e);var e}));var e=t.O();_N_E=e}]);